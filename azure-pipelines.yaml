pool:
  name: Azure Pipelines
  vmImage: 'ubuntu-latest'

variables:
  AWS.Region: 'us-east-1'

steps:
- task: CloudFormationCreateOrUpdateStack@1
  displayName: 'Create Stack: VPC for EKS Cluster'
  inputs:
    awsCredentials: 'CodeFuller @ AWS'
    stackName: 'vpc-for-eks'
    templateSource: 'file'
    templateFile: 'vpc-for-eks.yaml'

- task: CloudFormationCreateOrUpdateStack@1
  displayName: 'Create Stack: EKS Cluster Role'
  inputs:
    awsCredentials: 'CodeFuller @ AWS'
    stackName: 'eksClusterRole'
    templateSource: 'file'
    templateFile: 'eks-cluster-role.yaml'
