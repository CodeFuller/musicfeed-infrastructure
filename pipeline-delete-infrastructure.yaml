pool:
  name: Azure Pipelines
  vmImage: ubuntu-latest

trigger: none

variables:
  AWS.Region: us-east-1
  AWS.Credentials: CodeFuller @ AWS

steps:
- task: CloudFormationDeleteStack@1
  displayName: 'Delete Stack: IAM Role for EKS ALB Controller'
  inputs:
    awsCredentials: $(AWS.Credentials)
    stackName: eks-alb-controller-role

- task: CloudFormationDeleteStack@1
  displayName: 'Delete Stack: EKS Nodes Group'
  inputs:
    awsCredentials: $(AWS.Credentials)
    stackName: eks-nodes-group

- task: CloudFormationDeleteStack@1
  displayName: 'Delete Stack: EKS Cluster'
  inputs:
    awsCredentials: $(AWS.Credentials)
    stackName: eks-cluster

- task: CloudFormationDeleteStack@1
  displayName: 'Delete Stack: EKS VPC'
  inputs:
    awsCredentials: $(AWS.Credentials)
    stackName: eks-vpc
